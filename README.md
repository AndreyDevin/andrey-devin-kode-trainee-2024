# andrey-devin-kode-trainee-2024
Разбивка на задачи и оценка времени на их выполнение.

1. 
Создать новый Compose+Retrofit+Koin проект
Успешно собрать, получить Hello World
Оценочно 30 мин.
Фактически 20 мин.

2.
Написать API-модель (20 мин) и ретрофит-интерфейс (30 мин)
Итого оценочно 50 мин.
Фактически 50 мин.

3.
Написать DI:
Создать класс ViewModel (30 мин)
Создать Koin-модуль,
получить в  Activity инстанс ViewModel (30 мин)
В качестве теста, вывести на экран ответ API.
Итого оценочно 60 мин.
Фактически написал за 50 мин, но при попытке получить ответ API, поймал странную ошибку:
HTTP FAILED: java.net.SocketException: socket failed: EPERM (Operation not permitted)
Как понимаю, приложению просто не давался выход в интернет (разрешение в манифесте было).
Но я наверное час искал что сделал не так.
В итоге надо было просто удалить приложение с эмулятора))
Установил заново и всё заработало.
Так что фактически на пункт 3 ушло 120 мин.


4.
Написать методы Data-слоя:
- getApiData
- фильрация по департаменту
- фильтрация (поиск) по имени/никнейму
- сортировка по алфавиту
- сортировка по ДР
по 10 мин на метод,
плюс протестировать каждый метод - еще по 10 мин
Итого оценочно 100 мин.
Фактически 270 мин.
- Причина сильного расхождения оценочного и фактического - при сортировке по ДР,
- не хотел использовать ZonedDateTime или подобное,
- но посмотрев как это выглядит, переделывал поле birthday как ZonedDateTime.

Переходим к UI. Планирую реализовать MVI-подход.
5.
Написать sealed class Intent, где соберем возможные варианты
действий пользователя:
- начальное состояние "с дефолтными настройками"
- выбор департамента
- поиск по имени/никнэйму
- сортировка по алфавиту/ДР
- открыть детали о конкретной персоне
- принудительная перезагрузка (по свайпу пользователя)
Оценочно 60 мин.
Фактически 180 мин :)
- Причина сильного расхождения оценочного и фактического - пробовал варианты, как лучше сделать.

6.
Написать sealed class UiState, где соберем возможные варианты данных для отображения:
- список отсортированный по алфавиту
- список отсортированный по ДР
- конкретная персона
- не найдено ни одного пользователя соответствующего символам в поисковой строке
- нет данных (Loading)
- нет данных (Error)
Оценочно 30 мин, подписаться на это в Activity + 20 мин.
Фактически 200 мин :(
- Причина сильного расхождения оценочного и фактического - пробовал варианты, как лучше сделать,
- и в итоге переписал всю вьюмодель.

6.1
По факту, прежде чем переходить к пункту 7, опять изменил UiState.
Сделал, что это не только sealed class состояния данных, но и содержит в себе data class с выбором,
который сделал пользователь: департамент, текст в поисковой строке, тип сортировки.
Таким образом, при смене конфигурации устройства, всегда можно было восстановить состояние UI.
Это, вместе с данными от API, содержится в одном объекте по принципу единого источника данных.
Заняло 80 мин.

7.
Написать composable PersonDetails (50 мин)
Реализовть BackPressed (20 мин)
Итого оценочно 70 мин.
Фактически 200 мин :|

8.
Написать composable PersonsListItem (35 мин)
и composable PersonsLazyColumn (35 мин)
Итого оценочно 70 мин.
Фактически 180 мин...

8.1
По факту, прежде чем переходить к пункту 9, поменял реализацию BackPressed из экрана деталей,
чтобы возвращаться на список с сохраненной позицией скролинга.
для этого UiState.userChoice теперь имеет поле val lazyListState: LazyListState
Заняло 50 мин.

9.
Написать и потестить ScrollableTabRow со списком департаментов
Оценочно 60 мин.
Фактически 90 мин.

10.
Написать и потестить BottomSheet с вариантами фильтрации по алфавиту/по ДР
Оценочно 50 мин.
Фактически:
170 мин непосредственно на BottomSheet
и 180 мин на разделитель списка, на тех, у кого ДР будет в этом году и в следующем.
Так долго потратил на разделитель, потому что сначала местоположение разделителя считал UseCase
(не хотел нагружать UI дополнительными расчетами).
Но потом решил, что это нарушает принципы clean, что доменный слой знает о маленьком элементе дизайна.
Переделал на вариант где EmployeesList сама находит dividerIndex, посчитал что это меньшее зло :)

11.
Написать и потестить SearchField (поиск по имени/никнэйму).
Реализовать при этом вариант "ничего не найдено".
Оценочно 90 мин.
Фактически

12.
Реализовать Pull-to-refresh
Оценочно 60 мин.
Фактически

13.
Отображение статуса загрузки данных (задача со звездочкой)
и потестить, как работает.
Оценочно 80 мин.
Фактически



Всего:
оценочно 830 мин (13ч 50м)
фактически

